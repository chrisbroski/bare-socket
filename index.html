<!doctype html>
<html>
<head>
<title>WebSocket Chat Demo</title>
<meta charset="utf-8">
<style>
#chatbox {
    border: 1px solid #000;
    width: 480px;
    height: 240px;
    overflow: auto;
}
</style>

<body>

<h1>Bare Socket</h1>

<form onsubmit="return send()">
    <p>
        <input id="msg" placeholder="Message to send">
        <button>Send</button>
    </p>
</form>

<div id="chatbox""></div>

<script>
var conn = new WebSocket("ws://localhost:6503");

conn.onopen = function(e) {
    console.log(e);
};

// Send a message to the server
function send() {
    conn.send(document.querySelector("#msg").value);
    document.querySelector("#msg").value = "";
    return false;
}

// receive a message form the server
conn.onmessage = function(e) {
    var disp = document.querySelector("#chatbox"),
        p = document.createElement("p");
    p.textContent = e.data;
    disp.appendChild(p);
};
</script>
